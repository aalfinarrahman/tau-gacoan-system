<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tau Gacoan - Sistem Manajemen Meja</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .table-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 8px; }
        .table-item { aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .table-item:hover { transform: scale(1.05); }
        .available { background-color: #10b981; color: white; }
        .occupied { background-color: #ef4444; color: white; }
        .cleaning { background-color: #f59e0b; color: white; }
    </style>
</head>
<body class="bg-gradient-to-br from-red-50 to-orange-50 min-h-screen">
    <div class="container mx-auto p-4">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-red-600 mb-2">Tau Gacoan</h1>
            <p class="text-gray-600">Sistem Manajemen Meja Multi-Zone</p>
        </div>

        <!-- User Selection -->
        <div class="mb-6 text-center">
            <label class="block text-sm font-medium text-gray-700 mb-2">Login sebagai:</label>
            <select id="userRole" class="px-4 py-2 border border-gray-300 rounded-lg">
                <option value="admin">Manager/Admin</option>
                <option value="waiter_a">Waiter Area A</option>
                <option value="waiter_b">Waiter Area B</option>
                <option value="waiter_c">Waiter Area C</option>
                <option value="waiter_d">Waiter Area D</option>
                <option value="cleaning">Cleaning Staff</option>
            </select>
        </div>

        <!-- Zone Selection -->
        <div class="flex flex-wrap justify-center gap-2 mb-6">
            <button onclick="showZone('all')" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                Semua Area
            </button>
            <button onclick="showZone('A')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                Area A - Depan
            </button>
            <button onclick="showZone('B')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                Area B - Tengah  
            </button>
            <button onclick="showZone('C')" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                Area C - Belakang
            </button>
            <button onclick="showZone('D')" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
                Area D - Outdoor
            </button>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-3 md:grid-cols-5 gap-4 mb-6">
            <div class="bg-white rounded-lg p-4 text-center shadow-md">
                <div class="text-2xl font-bold text-green-600" id="availableCount">75</div>
                <div class="text-sm text-gray-500">Kosong</div>
            </div>
            <div class="bg-white rounded-lg p-4 text-center shadow-md">
                <div class="text-2xl font-bold text-red-600" id="occupiedCount">20</div>
                <div class="text-sm text-gray-500">Terisi</div>
            </div>
            <div class="bg-white rounded-lg p-4 text-center shadow-md">
                <div class="text-2xl font-bold text-yellow-600" id="cleaningCount">5</div>
                <div class="text-sm text-gray-500">Cleaning</div>
            </div>
            <div class="bg-white rounded-lg p-4 text-center shadow-md hidden md:block">
                <div class="text-2xl font-bold text-blue-600">100</div>
                <div class="text-sm text-gray-500">Total</div>
            </div>
            <div class="bg-white rounded-lg p-4 text-center shadow-md hidden md:block">
                <div class="text-2xl font-bold text-purple-600">20%</div>
                <div class="text-sm text-gray-500">Okupansi</div>
            </div>
        </div>

        <!-- Tables Grid -->
        <div class="table-grid mb-6" id="tablesGrid">
            <!-- Tables will be generated by JavaScript -->
        </div>

        <!-- Legend -->
        <div class="flex flex-wrap justify-center gap-4 text-sm">
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-green-500 rounded"></div>
                <span>Kosong</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-red-500 rounded"></div>
                <span>Terisi</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                <span>Cleaning</span>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="tableModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg p-6 w-full max-w-md">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold" id="modalTitle">Meja 1</h2>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div class="space-y-4" id="modalContent">
                <!-- Modal content will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Initialize tables data
        let tables = [];
        let currentZone = 'all';

        // Initialize 100 tables
        function initTables() {
            const zones = [
                { id: 'A', name: 'Area A - Depan', tables: Array.from({length: 25}, (_, i) => i + 1) },
                { id: 'B', name: 'Area B - Tengah', tables: Array.from({length: 30}, (_, i) => i + 26) },
                { id: 'C', name: 'Area C - Belakang', tables: Array.from({length: 25}, (_, i) => i + 56) },
                { id: 'D', name: 'Area D - Outdoor', tables: Array.from({length: 20}, (_, i) => i + 81) }
            ];

            zones.forEach(zone => {
                zone.tables.forEach(tableNum => {
                    tables.push({
                        id: tableNum,
                        number: tableNum,
                        zone: zone.id,
                        status: Math.random() > 0.8 ? (Math.random() > 0.7 ? 'occupied' : 'cleaning') : 'available',
                        customers: 0,
                        customerName: '',
                        startTime: null
                    });
                });
            });
        }

        // Render tables
        function renderTables() {
            const grid = document.getElementById('tablesGrid');
            const filteredTables = currentZone === 'all' ? tables : tables.filter(t => t.zone === currentZone);

            grid.innerHTML = filteredTables.map(table => `
                <div class="table-item ${table.status}" onclick="openModal(${table.id})">
                    <div class="font-bold text-lg">${table.number}</div>
                    <div class="text-xs">${table.zone}</div>
                    ${table.status === 'occupied' ? `<div class="text-xs">${table.customers || 2} orang</div>` : ''}
                </div>
            `).join('');

            updateStats();
        }

        // Update statistics
        function updateStats() {
            const available = tables.filter(t => t.status === 'available').length;
            const occupied = tables.filter(t => t.status === 'occupied').length;
            const cleaning = tables.filter(t => t.status === 'cleaning').length;

            document.getElementById('availableCount').textContent = available;
            document.getElementById('occupiedCount').textContent = occupied;
            document.getElementById('cleaningCount').textContent = cleaning;
        }

        // Show zone
        function showZone(zone) {
            currentZone = zone;
            renderTables();
        }

        // Open modal
        function openModal(tableId) {
            const table = tables.find(t => t.id === tableId);
            document.getElementById('modalTitle').textContent = `Meja ${table.number} - Area ${table.zone}`;
            
            let content = `<div class="text-sm text-gray-600 mb-4">Status: <span class="font-medium capitalize">${table.status}</span></div>`;
            
            if (table.status === 'available') {
                content += `
                    <button onclick="changeStatus(${tableId}, 'occupied')" class="bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600 w-full mb-2">
                        Isi Meja
                    </button>
                `;
            } else if (table.status === 'occupied') {
                content += `
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Pelanggan</label>
                        <input type="text" id="customerName" value="${table.customerName}" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Jumlah Pelanggan</label>
                        <input type="number" id="customerCount" value="${table.customers || 2}" min="1" max="20" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div class="flex gap-2">
                        <button onclick="changeStatus(${tableId}, 'cleaning')" class="bg-yellow-500 text-white py-2 px-4 rounded-md hover:bg-yellow-600 flex-1">
                            Perlu Cleaning
                        </button>
                        <button onclick="changeStatus(${tableId}, 'available')" class="bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 flex-1">
                            Kosongkan
                        </button>
                    </div>
                `;
            } else if (table.status === 'cleaning') {
                content += `
                    <button onclick="changeStatus(${tableId}, 'available')" class="bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 w-full mb-2">
                        Selesai Cleaning
                    </button>
                `;
            }

            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('tableModal').style.display = 'flex';
        }

        // Close modal
        function closeModal() {
            document.getElementById('tableModal').style.display = 'none';
        }

        // Change table status
        function changeStatus(tableId, newStatus) {
            const table = tables.find(t => t.id === tableId);
            table.status = newStatus;
            
            if (newStatus === 'occupied') {
                table.customers = 2;
                table.startTime = new Date();
            } else if (newStatus === 'available') {
                table.customers = 0;
                table.customerName = '';
                table.startTime = null;
            }
            
            closeModal();
            renderTables();
        }

        // Initialize on load
        window.onload = function() {
            initTables();
            renderTables();
        };
    </script>
</body>
</html>
